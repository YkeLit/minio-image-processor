http {
    server {
        listen 80;
        
        # MinIO原始文件访问
        location /minio/ {
            proxy_pass http://localhost:9000/;
            proxy_set_header Host $host;
        }

        # 图片处理接口
        location /processed/ {
            # 代理到MinIO获取原始图片
            proxy_pass http://localhost:9000/;
            proxy_set_header Host $host;
            
            # 启用图片处理模块
            image_filter resize $arg_width $arg_height;
            image_filter_jpeg_quality 85;
            image_filter_buffer 10M;
            
            # 处理错误响应
            error_page 415 = @empty;
        }

        location @empty {
            empty_gif;
        }
    }
}
